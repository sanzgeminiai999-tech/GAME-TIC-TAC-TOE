<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tic-Tac-Toe</title>

    <style>
        :root {
            --warna-latar: #fff;
            --warna-board: #ffffff;
            --warna-cell: #e4e6eb;
            --warna-border: #cccccc;
            --warna-teks: #1c1e21;
            --warna-x: #e74c3c;
            --warna-o: #3498db;
            --warna-tombol: #42b72a;
            --warna-tombol-hover: #36a420;
            --warna-mode: #0866ff;
            --warna-mode-aktif: #0558d4;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--warna-latar);
            color: var(--warna-teks);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        main {
            background-color: var(--warna-board);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        h1 {
            margin-top: 0;
            color: var(--warna-teks);
        }

        /* 1. Pemilih Mode */
        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            background-color: var(--warna-mode);
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .mode-btn:hover {
            opacity: 0.9;
        }
        
        /* Kelas 'active' untuk mode yang dipilih */
        .mode-btn.active {
            background-color: var(--warna-mode-aktif);
            font-weight: bold;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* 2. Papan Skor */
        .scoreboard {
            display: flex;
            justify-content: space-around;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: var(--warna-latar);
            border-radius: 8px;
        }
        
        #score-x { color: var(--warna-x); }
        #score-o { color: var(--warna-o); }
        
        .score-display span {
            display: block;
            font-size: 1.5rem;
        }

        /* 3. Status Area */
        #status-area {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            min-height: 1.5em; /* Mencegah layout 'loncat' */
        }

        /* 4. Papan Permainan (Menggunakan CSS Grid) */
        #game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .cell {
            width: 100px;
            height: 100px;
            background-color: var(--warna-cell);
            border: 2px solid var(--warna-border);
            border-radius: 8px;
            cursor: pointer;
            
            /* Teks (X dan O) di tengah */
            display: flex;
            justify-content: center;
            align-items: center;
            
            font-size: 4rem;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .cell:hover {
            background-color: #dcdfe3;
        }
        
        /* Pewarnaan spesifik untuk X dan O */
        .cell.x {
            color: var(--warna-x);
        }

        .cell.o {
            color: var(--warna-o);
        }

        /* 5. Tombol Reset */
        #reset-button {
            display: block;
            width: 100%;
            padding: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            color: white;
            background-color: var(--warna-tombol);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #reset-button:hover {
            background-color: var(--warna-tombol-hover);
        }

        /* Responsif untuk layar kecil */
        @media (max-width: 450px) {
            main {
                padding: 1rem;
            }
            .cell {
                width: 80px;
                height: 80px;
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>

    <main>
        <h1>Tic-Tac-Toe</h1>

        <div class="mode-selector">
            <button class="mode-btn active" id="mode-pvp">Player vs Player</button>
            <button class="mode-btn" id="mode-pvc">Player vs Komputer</button>
        </div>

        <div class="scoreboard">
            <div class="score-display">
                Pemain X
                <span id="score-x">0</span>
            </div>
            <div class="score-display">
                Pemain O
                <span id="score-o">0</span>
            </div>
        </div>

        <h2 id="status-area">Giliran Pemain X</h2>

        <div id="game-board">
            <div class="cell" data-index="0"></div>
            <div class="cell" data-index="1"></div>
            <div class="cell" data-index="2"></div>
            <div class="cell" data-index="3"></div>
            <div class="cell" data-index="4"></div>
            <div class="cell" data-index="5"></div>
            <div class="cell" data-index="6"></div>
            <div class="cell" data-index="7"></div>
            <div class="cell" data-index="8"></div>
        </div>

        <button id="reset-button">Mulai Ulang</button>
    </main>

    <script>
        // 1. Ambil Elemen-Elemen DOM
        const cells = document.querySelectorAll('.cell');
        const statusArea = document.getElementById('status-area');
        const resetButton = document.getElementById('reset-button');
        const modePvpBtn = document.getElementById('mode-pvp');
        const modePvcBtn = document.getElementById('mode-pvc');
        const scoreXEl = document.getElementById('score-x');
        const scoreOEl = document.getElementById('score-o');

        // 2. Inisialisasi Variabel Status Game
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let isGameActive = true;
        let gameMode = 'PvP'; // Default 'PvP' (Player vs Player)
        let scores = { X: 0, O: 0 };

        // Kondisi untuk menang (kombinasi indeks array)
        const winningConditions = [
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            [0, 4, 8],
            [2, 4, 6]
        ];

        // 3. Fungsi Utama
        
        /**
         * Fungsi yang dijalankan saat sebuah sel diklik.
         */
        function handleCellClick(e) {
            const clickedCell = e.target;
            const clickedCellIndex = parseInt(clickedCell.dataset.index);

            // Cek apakah sel sudah diisi atau game sudah selesai
            if (board[clickedCellIndex] !== '' || !isGameActive) {
                return;
            }

            // Proses giliran pemain
            processMove(clickedCell, clickedCellIndex);

            // Cek hasil setelah giliran
            checkResult();

            // Jika game masih aktif dan modenya PvC, giliran komputer
            if (isGameActive && gameMode === 'PvC' && currentPlayer === 'O') {
                statusArea.textContent = 'Komputer sedang berpikir...';
                // Beri jeda sedikit agar terlihat natural
                setTimeout(computerMove, 700);
            }
        }

        /**
         * Memproses langkah pemain (atau komputer) ke papan.
         */
        function processMove(cell, index) {
            board[index] = currentPlayer;
            cell.textContent = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase()); // Menambah kelas 'x' atau 'o' untuk styling
        }

        /**
         * Logika untuk giliran Komputer (AI Sederhana: acak).
         */
        function computerMove() {
            // Kumpulkan semua sel yang masih kosong
            let emptyCells = [];
            board.forEach((cell, index) => {
                if (cell === '') {
                    emptyCells.push(index);
                }
            });

            // Jika ada sel kosong, pilih satu secara acak
            if (emptyCells.length > 0) {
                const randomIndex = Math.floor(Math.random() * emptyCells.length);
                const computerCellIndex = emptyCells[randomIndex];
                const computerCell = document.querySelector(`.cell[data-index='${computerCellIndex}']`);

                processMove(computerCell, computerCellIndex);
                checkResult();
            }
        }

        /**
         * Memeriksa kondisi menang, seri, atau lanjut.
         */
        function checkResult() {
            let roundWon = false;
            for (let i = 0; i < winningConditions.length; i++) {
                const [a, b, c] = winningConditions[i];
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    roundWon = true;
                    break;
                }
            }

            // Jika ada yang menang
            if (roundWon) {
                statusArea.textContent = `Pemain ${currentPlayer} Menang!`;
                isGameActive = false;
                updateScore(currentPlayer);
                return;
            }

            // Jika seri (tidak ada sel kosong lagi)
            let roundDraw = !board.includes('');
            if (roundDraw) {
                statusArea.textContent = 'Permainan Seri!';
                isGameActive = false;
                return;
            }

            // Jika game lanjut, ganti pemain
            changePlayer();
        }

        /**
         * Mengganti giliran pemain.
         */
        function changePlayer() {
            currentPlayer = (currentPlayer === 'X') ? 'O' : 'X';
            
            if (gameMode === 'PvP' || currentPlayer === 'X') {
                 statusArea.textContent = `Giliran Pemain ${currentPlayer}`;
            }
        }

        /**
         * Mengupdate papan skor.
         */
        function updateScore(winner) {
            scores[winner]++;
            scoreXEl.textContent = scores.X;
            scoreOEl.textContent = scores.O;
        }

        /**
         * Mengatur ulang permainan ke kondisi awal.
         */
        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            isGameActive = true;
            currentPlayer = 'X';
            statusArea.textContent = `Giliran Pemain ${currentPlayer}`;

            cells.forEach(cell => {
                cell.textContent = '';
                cell.classList.remove('x', 'o');
            });
        }

        /**
         * Mengganti mode permainan.
         */
        function setGameMode(mode) {
            gameMode = mode;
            
            // Update tampilan tombol aktif
            if (mode === 'PvP') {
                modePvpBtn.classList.add('active');
                modePvcBtn.classList.remove('active');
                // Skor tetap di-reset, tapi label pemain bisa diubah jika mau
            } else {
                modePvpBtn.classList.remove('active');
                modePvcBtn.classList.add('active');
                // Bisa ubah label "Pemain O" menjadi "Komputer" jika mau
            }
            
            // Reset skor dan papan saat ganti mode
            scores = { X: 0, O: 0 };
            scoreXEl.textContent = '0';
            scoreOEl.textContent = '0';
            resetGame();
        }

        // 4. Tambahkan Event Listeners
        cells.forEach(cell => cell.addEventListener('click', handleCellClick));
        resetButton.addEventListener('click', resetGame);
        modePvpBtn.addEventListener('click', () => setGameMode('PvP'));
        modePvcBtn.addEventListener('click', () => setGameMode('PvC'));

    </script>
</body>
</html>
